{"version":3,"file":"static/js/140.164596c5.chunk.js","mappings":"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","sources":["shared/components/Three.jsx","pages/Home.js"],"sourcesContent":["import React from \"react\";\r\nimport * as THREE from \"three\";\r\nimport { MTLLoader } from \"three/examples/jsm/loaders/MTLLoader\";\r\n// import { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\r\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader\";\r\n// import { TrackballControls } from \"three/examples/jsm/controls/TrackballControls\";\r\n\r\n// import exhibitObj from \"../../public/3d/Emergency_Backup_Generator-(Wavefront OBJ).obj\";\r\n// import exhibitMtl from \"../assets/3d/Emergency_Backup_Generator-(Wavefront OBJ).mtl\";\r\n\r\nexport default function Three() {\r\n  let width = window.innerWidth - 100;\r\n  let height = window.innerHeight;\r\n  let threeCanvas = React.useRef();\r\n  let scene = React.useRef(new THREE.Scene()).current;\r\n  let camera = React.useRef(\r\n    new THREE.PerspectiveCamera(45, width / height, 0.1, 1000)\r\n  ).current;\r\n  let render = React.useRef(\r\n    new THREE.WebGLRenderer({ antialias: true })\r\n  ).current;\r\n  let mesh = React.useRef([]).current;\r\n  let light = React.useRef([]).current;\r\n  let isDown = React.useRef(false).current;\r\n  let PI = React.useRef(15).current;\r\n  let R = React.useRef(90).current;\r\n  // 初始化\r\n  let init = React.useCallback(() => {\r\n    render.setSize(width, height);\r\n    render.setClearColor(\"rgb(256,256,256,0)\", 1.0);\r\n    camera.updateProjectionMatrix();\r\n    camera.position.set(10, 10, PI);\r\n    camera.lookAt(0, 0, 0);\r\n    // camera.add(light.pointLight);\r\n  }, [render, threeCanvas]);\r\n  // 创建mesh\r\n  //   let createMesh = React.useCallback(() => {\r\n  //     let rect = new THREE.BoxBufferGeometry(2, 2, 2);\r\n  //     let material = new THREE.MeshBasicMaterial({ color: \"red\" });\r\n  //     let rectMesh = new THREE.Mesh(rect, material);\r\n  //     rectMesh.position.set(0, 0, 0);\r\n  //     scene.add(rectMesh);\r\n  //     mesh.push(rectMesh);\r\n  //   }, []);\r\n  // 创建灯光\r\n  let createControls = React.useCallback(() => {}, []);\r\n  let createLight = React.useCallback(() => {\r\n    let dirLight = new THREE.DirectionalLight(\"#ffffff\", 0.5);\r\n    dirLight.position.set(100, 200, 100);\r\n    let ambLight = new THREE.AmbientLight(\"#ffffff\", 0.5);\r\n    scene.add(dirLight, ambLight);\r\n    light.push(dirLight, ambLight);\r\n  }, []);\r\n  // 载入模型\r\n  let createObj = React.useCallback(() => {\r\n    let mtlLoader = new MTLLoader();\r\n    mtlLoader.setPath(\"/3d/\");\r\n    mtlLoader.load(\r\n      \"Emergency_Backup_Generator-(Wavefront OBJ).mtl\",\r\n      function (mtl) {\r\n        mtl.preload();\r\n        let loader = new OBJLoader();\r\n        loader.setMaterials(mtl);\r\n        loader.setPath(\"/3d/\");\r\n        loader.load(\r\n          // 资源的URL\r\n          \"Emergency_Backup_Generator-(Wavefront OBJ).obj\",\r\n\r\n          // onLoad回调\r\n          // Here the loaded data is assumed to be an object\r\n          function (obj) {\r\n            // Add the loaded object to the scene\r\n            obj.position.set(0, 0, 0);\r\n\r\n            scene.add(obj);\r\n            mesh.push(obj);\r\n          },\r\n\r\n          // onProgress回调\r\n          function (xhr) {\r\n            console.log((xhr.loaded / xhr.total) * 100 + \"% loaded\");\r\n          },\r\n\r\n          // onError回调\r\n          function (err) {\r\n            console.error(\"An error happened\");\r\n          }\r\n        );\r\n      }\r\n    );\r\n  }, []);\r\n  // 逐帧渲染\r\n  let renderScene = React.useCallback(() => {\r\n    render.render(scene, camera);\r\n    window.requestAnimationFrame(() => {\r\n      renderScene();\r\n    });\r\n  }, [render]);\r\n  let down = React.useCallback(() => {\r\n    isDown = true;\r\n  }, []);\r\n  let up = React.useCallback(() => {\r\n    isDown = false;\r\n  }, []);\r\n  let move = React.useCallback((event) => {\r\n    if (isDown === false) return;\r\n    R -= event.movementX * 1;\r\n    let x = PI * Math.sin(R / (180 * Math.PI));\r\n    let y = camera.position.y + event.movementY * 0.1;\r\n    let z = PI * Math.cos(R / (180 * Math.PI));\r\n    camera.position.set(x, y, z);\r\n    camera.lookAt(0, 0, 0);\r\n  }, []);\r\n  React.useEffect(() => {\r\n    threeCanvas.current.append(render.domElement);\r\n    init();\r\n    createLight();\r\n    // createMesh();\r\n    // createControls();\r\n    createObj();\r\n    renderScene();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        ref={threeCanvas}\r\n        onMouseDown={down}\r\n        onMouseUp={up}\r\n        onMouseMove={move}\r\n      >\r\n        <div\r\n          className={\"hero-slider__item__info__title color-undefined\"}\r\n          style={{\r\n            position: \"absolute\",\r\n            width: \"40vw\",\r\n            height: \"80vh\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          空调展示\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","/*\r\n * @Author: D_bxg\r\n * @Date: 2022-02-19 21:36:10\r\n * @LastEditors: D_bxg\r\n * @LastEditTime: 2022-02-26 20:08:01\r\n * @Description: file content\r\n * @FilePath: \\applicatione:\\Code\\Project\\Graduation-Project\\Front-end\\src\\pages\\Home.js\r\n */\r\nimport { Link, Outlet } from \"react-router-dom\";\r\n\r\nimport Three from \"../shared/components/Three\"\r\nconst Home = () => {\r\n  return (\r\n    <>\r\n      <div>a</div>\r\n      <Three></Three>\r\n      <Link to=\"/catalog\">\r\n        <div>查看详情</div>\r\n          </Link>\r\n          <Outlet></Outlet>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"names":["Three","width","window","innerWidth","height","innerHeight","threeCanvas","React","scene","THREE","current","camera","render","antialias","mesh","light","isDown","PI","R","init","setSize","setClearColor","updateProjectionMatrix","position","set","lookAt","createLight","dirLight","ambLight","add","push","createObj","mtlLoader","MTLLoader","setPath","load","mtl","preload","loader","OBJLoader","setMaterials","obj","xhr","console","log","loaded","total","err","error","renderScene","requestAnimationFrame","down","up","move","event","movementX","x","Math","sin","y","movementY","z","cos","append","domElement","ref","onMouseDown","onMouseUp","onMouseMove","className","style","display","justifyContent","alignItems","to"],"sourceRoot":""}